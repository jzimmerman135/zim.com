<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <script>   
        window.Prism = window.Prism || {};        
        Prism.manual = true;
    </script> -->

    <%- include('../partials/head') %>

    <title>WebGL Shader</title>

    <link rel="stylesheet" href="/stylesheets/special/webgl.css">
</head>

<style>
    #mask {
        position:fixed;
        padding:0;
        margin:0;
        top:0;
        left:0;
        z-index: 1;
        width: 100%;
        height: 100%;
        transition: 1s;
        background: #000;
    }
</style>

<body>
    <div id="mask"></div>
    <div id="blockapurple">
        <canvas id="shaderCanvas"></canvas>
    </div>

    

    <%- include('../partials/nav.ejs') %>
    <div id="content">

        
        <h1>WebGL Fragment shader demo!</h1>
        <h6>Published: 8/6/22</h6>
        <hr>
        
        <br>
        <p>If all goes well the fragment shader should appear above the navbar.
            <br>
            Interesting right?
        </p>
        <br>
        <p>The ENTIRE fragment shader code is located below.</p>
        <pre><code id="shadercode"></code></pre>
        <p>This is all the code it takes to run!</p>
        <pre><code id="this website"></code></pre>


    </div>
    <%- include('../partials/footer.ejs') %>
</body>

<script src="/scripts/generic/webgl-utils.js"></script>
<script src="/scripts/special/frag-shader.js"></script>
<script>
    window.addEventListener('load', (event) => {
        const mask = document.getElementById('mask')
        console.log('page is fully loaded');
        mask.style.opacity = '0';
        setTimeout(() => {
            mask.remove();
        }, 500);
    });
    
    const canvas = document.getElementById('shaderCanvas');
    const codeTags = document.getElementsByTagName('code');
    
    fetchShadertoyShader(canvas, '/scripts/shaders/simple.glsl');
    fetchCodeblock(codeTags[0], 'glsl', '/scripts/shaders/simple.glsl');
    fetchCodeblock(codeTags[1], 'markup', '/webgl');
</script>

</html>